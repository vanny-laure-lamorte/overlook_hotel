<div th:fragment="connexion-modal" id="loginModal" th:class="'modal ' + (${showModal} ? 'visible' : 'hidden')">
    <div class="modal-content">
        <button id="closeModal" class="close-button" type="button">&times;</button>
        <div class="tabs forms-tabs">
            <button class="btn-tab tab active" data-tab="customer">Login/Register</button>
            <button class="btn-tab tab" data-tab="employee">Employee/Admin</button>
        </div>

        <div id="customerTab" class="tab-content active">
            <div class="split-content">
                <div class="split-left">
                    <div class="form-title">Login</div>
                    <form method="post" action="/login">
                        <input type="hidden" name="tab" value="customer">
                        <div th:if="${loginError}" class="error-message">
                            <span th:text="${loginError}"></span>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input name="email" placeholder="your@email.com">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input name="password" type="password" placeholder="••••••••">
                        </div>
                        <button type="submit" class="btn btn-primary btn-l btn-connexion">Login</button>
                    </form>
                </div>
                <div class="split-right">
                    <div class="form-title">Register</div>
                    <form method="post" action="/register">
                        <div th:if="${registerError}" class="error-message">
                            <span th:text="${registerError}"></span>
                        </div>
                        <div class="form-group">
                            <label>Full Name</label>
                            <input name="registerName">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input name="registerEmail">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input name="registerPassword" type="password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-l btn-connexion">Register</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="employeeTab" class="tab-content">
            <div class="split-content">
                <div class="split-left">
                    <div class="form-title">Employee Login</div>
                    <form method="post" action="/login">
                        <input type="hidden" name="tab" value="employee">
                        <div th:if="${loginError}" class="error-message">
                            <span th:text="${loginError}"></span>
                        </div>
                        <div class="form-group">
                            <label>Employee ID</label>
                            <input name="email">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input name="password" type="password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-l btn-connexion">Login</button>
                    </form>
                </div>
                <div class="split-right">
                    <div class="form-title">Admin Login</div>
                    <form method="post" action="/login">
                        <input type="hidden" name="tab" value="employee">
                        <div th:if="${loginError}" class="error-message">
                            <span th:text="${loginError}"></span>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input name="email">
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input name="password" type="password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-l btn-connexion">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Script for handling display of login modal and tab navigation
        document.addEventListener("DOMContentLoaded", function () {
            const loginButton = document.getElementById("loginButton");
            const loginModal = document.getElementById("loginModal");
            const closeModal = document.getElementById("closeModal");
            const tabs = document.querySelectorAll(".tab");
            const tabContents = document.querySelectorAll(".tab-content");
            const errorMessage = document.querySelectorAll(".error-message");

            loginButton.addEventListener("click", () => {
                loginModal.classList.remove("hidden");
                loginModal.classList.add("visible");
                if (errorMessage) {
                    errorMessage.style.display = "none";
                }
            });

            closeModal.addEventListener("click", () => {
                loginModal.classList.remove("visible");
                loginModal.classList.add("hidden");
                if (errorMessage) {
                    errorMessage.style.display = "none";
                }
            });

            tabs.forEach((tab) => {
                tab.addEventListener("click", function () {
                    tabs.forEach((t) => t.classList.remove("active"));
                    tabContents.forEach((c) => c.classList.remove("active"));

                    this.classList.add("active");
                    const selected = this.getAttribute("data-tab");
                    document.getElementById(selected + "Tab").classList.add("active");
                    if (errorMessage) {
                        errorMessage.style.display = "none";
                    }
                });
            });
        });
    </script>
</div>